<!DOCTYPE HTML><html lang="zh-CN"><head><meta charset="utf-8"><meta name="keywords" content="Android网络编程, Android,Java,Python,C language,C#,C++,HTML,CSS,JavaScript,JQuery,Vue.js等"><meta name="description" content="成功的信念在人脑中的作用就如闹钟,会在你需要时将你唤醒"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><meta name="renderer" content="webkit|ie-stand|ie-comp"><meta name="mobile-web-app-capable" content="yes"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><title>Android网络编程 | Lj&#39;blog</title><link rel="icon" type="image/png" href="/liaojie.github.io/medias/dog.png"><link rel="stylesheet" type="text/css" href="/liaojie.github.io/libs/awesome/css/all.css"><link rel="stylesheet" type="text/css" href="/liaojie.github.io/libs/materialize/materialize.min.css"><link rel="stylesheet" type="text/css" href="/liaojie.github.io/libs/aos/aos.css"><link rel="stylesheet" type="text/css" href="/liaojie.github.io/libs/animate/animate.min.css"><link rel="stylesheet" type="text/css" href="/liaojie.github.io/libs/lightGallery/css/lightgallery.min.css"><link rel="stylesheet" type="text/css" href="/liaojie.github.io/css/matery.css"><link rel="stylesheet" type="text/css" href="/liaojie.github.io/css/my.css"><script src="/liaojie.github.io/libs/jquery/jquery.min.js"></script><meta name="generator" content="Hexo 5.4.0"><style>.github-emoji{position:relative;display:inline-block;width:1.2em;min-height:1.2em;overflow:hidden;vertical-align:top;color:transparent}.github-emoji>span{position:relative;z-index:10}.github-emoji .fancybox,.github-emoji img{margin:0!important;padding:0!important;border:none!important;outline:0!important;text-decoration:none!important;user-select:none!important;cursor:auto!important}.github-emoji img{height:1.2em!important;width:1.2em!important;position:absolute!important;left:50%!important;top:50%!important;transform:translate(-50%,-50%)!important;user-select:none!important;cursor:auto!important}.github-emoji-fallback{color:inherit}.github-emoji-fallback img{opacity:0!important}</style><link rel="alternate" href="/liaojie.github.io/atom.xml" title="Lj'blog" type="application/atom+xml"></head><script type="text/javascript">WIDGET={FID:"1tFpFZ5Mtj"}</script><script type="text/javascript">var windowWidth=$(window).width();768<windowWidth&&document.write('<script type="text/javascript" src="https://apip.weatherdt.com/float/static/js/r.js?v=1111"><\/script>')</script><body><header class="navbar-fixed"><nav id="headNav" class="bg-color nav-transparent"><div id="navContainer" class="nav-wrapper container"><div class="brand-logo"><a href="/liaojie.github.io/" class="waves-effect waves-light"><div><img src="/liaojie.github.io/medias/loading.gif" data-original="/liaojie.github.io/medias/ljlogo.png" class="logo-img" alt="LOGO"> <span class="logo-span">Lj'blog</span></div></a></div><a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a><ul class="right nav-menu"><li class="hide-on-med-and-down nav-item"><a href="/liaojie.github.io/" class="waves-effect waves-light"><i class="fas fa-home" style="zoom:.6"></i> <span>首页</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/liaojie.github.io/tags" class="waves-effect waves-light"><i class="fas fa-tags" style="zoom:.6"></i> <span>标签</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/liaojie.github.io/categories" class="waves-effect waves-light"><i class="fas fa-bookmark" style="zoom:.6"></i> <span>分类</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/liaojie.github.io/archives" class="waves-effect waves-light"><i class="fas fa-archive" style="zoom:.6"></i> <span>归档</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/liaojie.github.io/about" class="waves-effect waves-light"><i class="fas fa-user-circle" style="zoom:.6"></i> <span>关于</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/liaojie.github.io/contact" class="waves-effect waves-light"><i class="fas fa-comments" style="zoom:.6"></i> <span>留言板</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/liaojie.github.io/friends" class="waves-effect waves-light"><i class="fas fa-address-book" style="zoom:.6"></i> <span>友情链接</span></a></li><li><a href="#searchModal" class="modal-trigger waves-effect waves-light"><i id="searchIcon" class="fas fa-search" title="搜索" style="zoom:.85"></i></a></li></ul><div id="mobile-nav" class="side-nav sidenav"><div class="mobile-head bg-color"><img src="/liaojie.github.io/medias/loading.gif" data-original="/liaojie.github.io/liaojie.github.io/medias/ljlogo.png" class="logo-img circle responsive-img"><div class="logo-name">Lj&#39;blog</div><div class="logo-desc">成功的信念在人脑中的作用就如闹钟,会在你需要时将你唤醒</div></div><ul class="menu-list mobile-menu-list"><li class="m-nav-item"><a href="/liaojie.github.io/" class="waves-effect waves-light"><i class="fa-fw fas fa-home"></i> 首页</a></li><li class="m-nav-item"><a href="/liaojie.github.io/tags" class="waves-effect waves-light"><i class="fa-fw fas fa-tags"></i> 标签</a></li><li class="m-nav-item"><a href="/liaojie.github.io/categories" class="waves-effect waves-light"><i class="fa-fw fas fa-bookmark"></i> 分类</a></li><li class="m-nav-item"><a href="/liaojie.github.io/archives" class="waves-effect waves-light"><i class="fa-fw fas fa-archive"></i> 归档</a></li><li class="m-nav-item"><a href="/liaojie.github.io/about" class="waves-effect waves-light"><i class="fa-fw fas fa-user-circle"></i> 关于</a></li><li class="m-nav-item"><a href="/liaojie.github.io/contact" class="waves-effect waves-light"><i class="fa-fw fas fa-comments"></i> 留言板</a></li><li class="m-nav-item"><a href="/liaojie.github.io/friends" class="waves-effect waves-light"><i class="fa-fw fas fa-address-book"></i> 友情链接</a></li></ul></div></div></nav></header><div class="bg-cover pd-header post-cover" style="background-image:url(/liaojie.github.io/medias/featureimages/17.jpg)"><div class="container" style="right:0;left:0"><div class="row"><div class="col s12 m12 l12"><div class="brand"><h1 class="description center-align post-title">Android网络编程</h1></div></div></div></div></div><main class="post-container content"><link rel="stylesheet" href="/liaojie.github.io/libs/tocbot/tocbot.css"><style>#articleContent h1::before,#articleContent h2::before,#articleContent h3::before,#articleContent h4::before,#articleContent h5::before,#articleContent h6::before{display:block;content:" ";height:100px;margin-top:-100px;visibility:hidden}#articleContent :focus{outline:0}.toc-fixed{position:fixed;top:64px}.toc-widget{width:345px;padding-left:20px}.toc-widget .toc-title{padding:35px 0 15px 17px;font-size:1.5rem;font-weight:700;line-height:1.5rem}.toc-widget ol{padding:0;list-style:none}#toc-content{padding-bottom:30px;overflow:auto}#toc-content ol{padding-left:10px}#toc-content ol li{padding-left:10px}#toc-content .toc-link:hover{color:#42b983;font-weight:700;text-decoration:underline}#toc-content .toc-link::before{background-color:transparent;max-height:25px;position:absolute;right:23.5vw;display:block}#toc-content .is-active-link{color:#42b983}#floating-toc-btn{position:fixed;right:15px;bottom:76px;padding-top:15px;margin-bottom:0;z-index:998}#floating-toc-btn .btn-floating{width:48px;height:48px}#floating-toc-btn .btn-floating i{line-height:48px;font-size:1.4rem}</style><div class="row"><div id="main-content" class="col s12 m12 l9"><div id="artDetail"><div class="card"><div class="card-content article-info"><div class="row tag-cate"><div class="col s7"><div class="article-tag"><a href="/liaojie.github.io/tags/Android/"><span class="chip bg-color">Android</span></a></div></div><div class="col s5 right-align"><div class="post-cate"><i class="fas fa-bookmark fa-fw icon-category"></i> <a href="/liaojie.github.io/categories/Android/" class="post-category">Android</a></div></div></div><div class="post-info"><div class="post-date info-break-policy"><i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp; 2021-11-20</div><div class="post-date info-break-policy"><i class="far fa-calendar-check fa-fw"></i>更新日期:&nbsp;&nbsp; 2021-11-24</div><div class="info-break-policy"><i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp; 8.5k</div><div class="info-break-policy"><i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp; 40 分</div><div id="busuanzi_container_page_pv" class="info-break-policy"><i class="far fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp; <span id="busuanzi_value_page_pv"></span></div></div></div><hr class="clearfix"><link rel="stylesheet" href="/liaojie.github.io/libs/prism/prism.css"><div class="card-content article-card-content"><div id="articleContent"><p>什么是网络编程?</p><p>网络编程从大的方面就是说对信息的发送接收。</p><p>通过操作相应API调度计算机资源硬件，并且利用管道(网线)进行数据交互的过程。</p><p>更为具体的涉及：网络模型、套接字、数据包</p><h2 id="文件下载"><a href="#文件下载" class="headerlink" title="文件下载"></a>文件下载</h2><p>接口:<br><img src="/liaojie.github.io/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/liaojie1314/PicGo/images/downloadfile.png"></p><pre class="line-numbers language-Java" data-language="Java"><code class="language-Java">public void downFile(View view) {
       new Thread(new Runnable() {
           @Override
           public void run() {
               InputStream inputStream = null;
               FileOutputStream fileOutputStream = null;
               try {
                   URL url = new URL(BASE_URL + "/download/11");
                   HttpURLConnection httpURLConnection = (HttpURLConnection) url.openConnection();
                   httpURLConnection.setConnectTimeout(10000);
                   httpURLConnection.setRequestMethod("GET");
                   httpURLConnection.setRequestProperty("Accept-Language","zh-CN,zh;q=0.9");
                   httpURLConnection.setRequestProperty("Accept","*/*");
                   httpURLConnection.connect();
                   int responseCode = httpURLConnection.getResponseCode();
                   Log.d(TAG,"responseCode == &gt; " + responseCode);
                   if(responseCode == HttpURLConnection.HTTP_OK) {
                       String headerField = httpURLConnection.getHeaderField("Content-disposition");
                       Log.d(TAG,"headerField == &gt; " + headerField);
                       //                        int index = headerField.indexOf("filename=");
                       //                        String fileName = headerField.substring(index + "filename=".length());
                       //                        Log.d(TAG,"fileName -- &gt; " + fileName);
                       String fileName = headerField.replace("attachment; filename=","");
                       Log.d(TAG,"fileName -- &gt; " + fileName);
                       File picFile = RequestTestActivity.this.getExternalFilesDir(Environment.DIRECTORY_PICTURES);
                       if(!picFile.exists()) {
                           picFile.mkdirs();
                       }
                       File file = new File(picFile + File.separator + fileName);
                       if(!file.exists()) {
                           file.createNewFile();
                       }
                       fileOutputStream = new FileOutputStream(file);
                       inputStream = httpURLConnection.getInputStream();
                       byte[] buffer = new byte[1024];
                       int len;
                       while((len = inputStream.read(buffer,0,buffer.length)) != -1) {
                           fileOutputStream.write(buffer,0,len);
                       }
                       fileOutputStream.flush();
                   }
               } catch(Exception e) {
                   e.printStackTrace();
               } finally {
                   IOUtils.ioClose(inputStream);
                   IOUtils.ioClose(fileOutputStream);
               }
           }
       }).start();
   }<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><h2 id="Url携带参数"><a href="#Url携带参数" class="headerlink" title="Url携带参数"></a>Url携带参数</h2><p>接口<br>get方法</p><blockquote><p>/get/param<br>参数：</p></blockquote><ul><li>keyword 关键字</li><li>page 页码</li><li>order 0 顺序 1 逆序</li></ul><p>eg:</p><blockquote><p>/get/param?keyword=你好&amp;page=1&amp;order=0</p></blockquote><p>参数在Url上,我们可以直接对其进行拼接即可。</p><pre class="line-numbers language-Java" data-language="Java"><code class="language-Java">private void startRequest(final Map&lt;String,String&gt; params,final String method,final String api) {
       new Thread(new Runnable() {
           @Override
           public void run() {
               BufferedReader bufferedReader = null;
               try {
                   //组装参数
                   StringBuilder sb = new StringBuilder();
                   if(params != null &amp;&amp; params.size() &gt; 0) {
                       sb.append("?");
                       Iterator&lt;Map.Entry&lt;String,String&gt;&gt; iterator = params.entrySet().iterator();
                       while(iterator.hasNext()) {
                           Map.Entry&lt;String,String&gt; next = iterator.next();
                           sb.append(next.getKey());
                           sb.append("=");
                           sb.append(next.getValue());
                           if(iterator.hasNext()) {
                               sb.append("&amp;");
                           }
                       }
                       Log.d(TAG,"sb result -- &gt; " + sb.toString());

                   }
                   String params = sb.toString();
                   URL url;
                   if(params != null &amp;&amp; params.length() &gt; 0) {
                       url = new URL(BASE_URL + api + params);
                   } else {
                       url = new URL(BASE_URL + api);
                   }
                   Log.d(TAG,"url -=-- &gt; " + url.toString());
                   HttpURLConnection httpURLConnection = (HttpURLConnection) url.openConnection();
                   httpURLConnection.setRequestMethod(method);
                   httpURLConnection.setRequestProperty("Accept-Language","zh-CN,zh;q=0.9");
                   httpURLConnection.setRequestProperty("Accept","*/*");
                   httpURLConnection.connect();
                   int responseCode = httpURLConnection.getResponseCode();
                   if(responseCode == HttpURLConnection.HTTP_OK) {
                       InputStream inputStream = httpURLConnection.getInputStream();
                       bufferedReader = new BufferedReader(new InputStreamReader(inputStream));
                       String json = bufferedReader.readLine();
                       Log.d(TAG,"result -=-=- &gt; " + json);
                   }
               } catch(Exception e) {
                   e.printStackTrace();
               } finally {
                   if(bufferedReader != null) {
                       try {
                           bufferedReader.close();
                       } catch(IOException e) {
                           e.printStackTrace();
                       }
                   }
               }
           }
       }).start();
   }<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>测试代码</p><p>post/get</p><pre class="line-numbers language-Java" data-language="Java"><code class="language-Java">public void getWithParams(View view) {
    Map&lt;String,String&gt; params = new HashMap&lt;&gt;();
    params.put("keyword","这是我的关键字Keyword");
    params.put("page","12");
    params.put("order","0");
    startRequest(params,"GET","/get/param");
}
public void postWithParams(View view) {
    Map&lt;String,String&gt; params = new HashMap&lt;&gt;();
    params.put("string","这是我提交的字符串");
    startRequest(params,"POST","/post/string");
    }<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><h2 id="请求图片"><a href="#请求图片" class="headerlink" title="请求图片"></a>请求图片</h2><p>网络权限和配置</p><pre class="line-numbers language-XML" data-language="XML"><code class="language-XML">&lt;uses-permission android:name="android.permission.INTERNET" /&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>新建xml文件夹,在其中新建network_security_config.xml</p><pre class="line-numbers language-XML" data-language="XML"><code class="language-XML">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;network-security-config&gt;
    &lt;domain-config&gt;
        &lt;domain includeSubdomains="true"&gt;example.com&lt;/domain&gt;
        &lt;domain-config cleartextTrafficPermitted="true"&gt;
            &lt;domain includeSubdomains="true"&gt;www.sunofbeach.net&lt;/domain&gt;
            &lt;domain includeSubdomains="true"&gt;imgs.example.com&lt;/domain&gt;
        &lt;/domain-config&gt;
    &lt;/domain-config&gt;
&lt;/network-security-config&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/liaojie.github.io/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/liaojie1314/PicGo/images/security_config.png"></p><p>请求图片内容</p><pre class="line-numbers language-Java" data-language="Java"><code class="language-Java">public void requestImage(View view) {
      new Thread(new Runnable() {
          @Override
          public void run() {
              loadImage();
          }
      }).start();
  }

  private void loadImage() {
      try {
          URL url = new URL("https://imgs.example.com/group1/M00/00/05/rBsADV2rEz-AIzSoAABi-6nfiqs456.png");
          HttpURLConnection httpURLConnection = (HttpURLConnection) url.openConnection();
          httpURLConnection.setRequestMethod("GET");
          httpURLConnection.setConnectTimeout(10000);
          httpURLConnection.connect();
          InputStream is = httpURLConnection.getInputStream();
          final Bitmap bitmap = BitmapFactory.decodeStream(is);
          runOnUiThread(new Runnable() {
              @Override
              public void run() {
                  ImageView resultView = findViewById(R.id.image_result);
                  resultView.setImageBitmap(bitmap);
              }
          });
      } catch(Exception e) {
          e.printStackTrace();
      }
  }<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>添加布局UI:一个Button和一个ImageView</p><pre class="line-numbers language-XML" data-language="XML"><code class="language-XML">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;LinearLayout xmlns:android="https://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"&gt;

    &lt;Button
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:onClick="requestImage"
        android:text="请求图片" /&gt;

    &lt;ImageView
        android:id="@+id/image_result"
        android:layout_width="match_parent"
        android:layout_height="match_parent" /&gt;

&lt;/LinearLayout&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这里面其实就是把图片流通过一个BitmapFactory来对流进行编码转成图片内容显示到控件上</p><hr><h2 id="post提交文本内容"><a href="#post提交文本内容" class="headerlink" title="post提交文本内容"></a>post提交文本内容</h2><p>接口地址</p><blockquote><p>/post/comment</p></blockquote><p>提交内容：</p><p>{<br>“articleId”:”234123”,<br>“commentContent”:”这是评论内容”<br>}</p><p>请求代码</p><pre class="line-numbers language-Java" data-language="Java"><code class="language-Java">public void postRequest(View view) {
    new Thread(new Runnable() {
        @Override
        public void run() {
            OutputStream outputStream = null;
            InputStream inputStream = null;
            try {
                URL url = new URL(BASE_URL + "/post/comment");
                HttpURLConnection httpURLConnection = (HttpURLConnection) url.openConnection();
                httpURLConnection.setRequestMethod("POST");
                httpURLConnection.setConnectTimeout(10000);
                httpURLConnection.setRequestProperty("Content-Type","application/json;charset=UTF-8");
                httpURLConnection.setRequestProperty("Accept-Language","zh-CN,zh;q=0.9");
                httpURLConnection.setRequestProperty("Accept","application/json, text/plain, */*");
                CommentItem commentItem = new CommentItem("234134123","你的文章写得也太好了！");
                Gson gson = new Gson();
                String jsonStr = gson.toJson(commentItem);
                byte[] bytes = jsonStr.getBytes("UTF-8");
                Log.d(TAG,"jsonStr length -- &gt; " + bytes.length);
                httpURLConnection.setRequestProperty("Content-Length",String.valueOf(bytes.length));
                //连接
                httpURLConnection.connect();
                //把数据给到服务
                outputStream = httpURLConnection.getOutputStream();
                outputStream.write(bytes);
                outputStream.flush();
                //拿结果
                int responseCode = httpURLConnection.getResponseCode();
                if(responseCode == HttpURLConnection.HTTP_OK) {
                    inputStream = httpURLConnection.getInputStream();
                    BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(inputStream));
                    Log.d(TAG,"result -- &gt; " + bufferedReader.readLine());
                }
            } catch(Exception e) {
                e.printStackTrace();
            } finally {
                IOUtils.ioClose(inputStream);
                IOUtils.ioClose(outputStream);
            }
        }
    }).start();
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>使用GsonFormat生成以下类：</p><pre class="line-numbers language-Java" data-language="Java"><code class="language-Java">public class CommentItem {
    public CommentItem(String articleId,String commentContent) {
        this.articleId = articleId;
        this.commentContent = commentContent;
    }

    private String articleId;

    private String commentContent;

    public String getArticleId() {
        return articleId;
    }

    public void setArticleId(String articleId) {
        this.articleId = articleId;
    }

    public String getCommentContent() {
        return commentContent;
    }

    public void setCommentContent(String commentContent) {
        this.commentContent = commentContent;
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>运行结果</p><blockquote><p>result – &gt; {“success”:true,”code”:10000,”message”:”评论成功:你的文章写得也太好了！”,”data”:null}</p></blockquote><hr><h2 id="单-多-文件上传"><a href="#单-多-文件上传" class="headerlink" title="单(多)文件上传"></a>单(多)文件上传</h2><h3 id="接口地址"><a href="#接口地址" class="headerlink" title="接口地址"></a>接口地址</h3><p>方法：post</p><blockquote><p>/file/upload</p></blockquote><p>参数file</p><p>多文件上传</p><blockquote><p>/files/upload</p></blockquote><p>方法post 参数 files</p><h3 id="抓包"><a href="#抓包" class="headerlink" title="抓包"></a>抓包</h3><p>用postMan上传一个文件进行抓包去拼接内容</p><h3 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h3><pre class="line-numbers language-Java" data-language="Java"><code class="language-Java">private void uploadFile(File file,String fileKey,String fileName,String fileType,String BOUNDARY,
                                   OutputStream outputStream,boolean isLast) throws IOException {
       //准备数据
       StringBuilder headerSbInfo = new StringBuilder();
       headerSbInfo.append("--");
       headerSbInfo.append(BOUNDARY);
       headerSbInfo.append("\r\n");
       headerSbInfo.append("Content-Disposition: form-data; name=\"" + fileKey + "\"; filename=\"" + fileName + "\"");
       headerSbInfo.append("\r\n");
       headerSbInfo.append("Content-Type: " + fileType);
       headerSbInfo.append("\r\n");
       headerSbInfo.append("\r\n");
       byte[] headerInfoBytes = headerSbInfo.toString().getBytes("UTF-8");
       outputStream.write(headerInfoBytes);
       //文件内容
       FileInputStream fos = new FileInputStream(file);
       BufferedInputStream bfi = new BufferedInputStream(fos);
       byte[] buffer = new byte[1024];
       int len;
       while((len = bfi.read(buffer,0,buffer.length)) != -1) {
           outputStream.write(buffer,0,len);
       }
       //写尾部信息
       StringBuilder footerSbInfo = new StringBuilder();
       footerSbInfo.append("\r\n");
       footerSbInfo.append("--");
       footerSbInfo.append(BOUNDARY);
       if(isLast) {
           footerSbInfo.append("--");
           footerSbInfo.append("\r\n");
       }
       footerSbInfo.append("\r\n");
       outputStream.write(footerSbInfo.toString().getBytes("UTF-8"));
   }<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>如果是多文件,我们只需要向body里多添加几个文件而已,格式一样的。</p><p>多文件上传调用</p><pre class="line-numbers language-Java" data-language="Java"><code class="language-Java">OutputStream outputStream = null;
try {
    File fileOne = new File("/storage/emulated/0/Download/1.jpg");
    File fileTwo = new File("/storage/emulated/0/Download/rBsADV2rEz-AIzSoAABi-6nfiqs456.png");
    File fileThree = new File("/storage/emulated/0/Download/2.jpg");
    File fileFour = new File("/storage/emulated/0/Download/rBPLFV2A8POASi1aAAE-PgvGzOo723.jpg");
    String fileKey = "files";
    String fileType = "image/jpeg";
    String BOUNDARY = "--------------------------954555323792164398227139";
    //String BOUNDARY = "----------------------------954555323792164398227139--";
    //String BOUNDARY = "----------------------------954555323792164398227139";
    URL url = new URL(BASE_URL + "/files/upload");
    HttpURLConnection httpURLConnection = (HttpURLConnection) url.openConnection();
    httpURLConnection.setRequestMethod("POST");
    httpURLConnection.setConnectTimeout(10000);
    httpURLConnection.setRequestProperty("User-Agent", "Android/" + Build.VERSION.SDK_INT);
    httpURLConnection.setRequestProperty("Accept", "*/*");
    httpURLConnection.setRequestProperty("Cache-Control", "no-cache");
    httpURLConnection.setRequestProperty("Content-Type", "multipart/form-data; boundary=" + BOUNDARY);
    httpURLConnection.setRequestProperty("Connection", "keep-alive");
    httpURLConnection.setDoOutput(true);
    httpURLConnection.setDoInput(true);
    //连接
    httpURLConnection.connect();
    outputStream = httpURLConnection.getOutputStream();
    uploadFile(fileOne, fileKey, fileOne.getName(), fileType, BOUNDARY, outputStream, false);
    uploadFile(fileTwo, fileKey, fileTwo.getName(), fileType, BOUNDARY, outputStream, false);
    uploadFile(fileFour, fileKey, fileFour.getName(), fileType, BOUNDARY, outputStream, false);
    uploadFile(fileThree, fileKey, fileThree.getName(), fileType, BOUNDARY, outputStream, true);
    outputStream.flush();
    //获取返回的结果
    int responseCode = httpURLConnection.getResponseCode();
    Log.d(TAG, "responseCode -- &gt; " + responseCode);
    if (responseCode == HttpURLConnection.HTTP_OK) {
        InputStream inputStream = httpURLConnection.getInputStream();
        BufferedReader bf = new BufferedReader(new InputStreamReader(inputStream));
        String result = bf.readLine();
        Log.d(TAG, "result -- &gt; " + result);
    }
} catch (Exception e) {
    e.printStackTrace();
} finally {
    if (outputStream != null) {
        try {
            outputStream.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><h2 id="网络模型"><a href="#网络模型" class="headerlink" title="网络模型"></a>网络模型</h2><p>关于java的网络编程,其实也没什么的,先说一下网络模型：OSI参考模型&amp;TCP/IP参考模型</p><p>通常来讲,这个做开发的在这个传输层和网际层混,而应用层则是FTP/HTTP协议等,传输层就是这个TCP或者这个UDP,这个经常问到,面试的时候,说什么TCP和UDP的区别？</p><p><img src="/liaojie.github.io/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/liaojie1314/PicGo/images/%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B.png"></p><p>用户在这个应用层,我们在这个传输层和网际层。那么用户在操作数据时,是怎么样的过程呢？其实呀,数据先是从用户的应用层向下封装打包,再经过网络传输到接收端,接收端自下而上拆包,最后得到用户发送的数据。</p><p>大概是这样一个模式：A——-&gt;B——-&gt;B——–&gt;A</p><h3 id="网络通信的三要素"><a href="#网络通信的三要素" class="headerlink" title="网络通信的三要素"></a>网络通信的三要素</h3><p>IP地址、端口、传输协议</p><p>首先是IP地址,其实它是一个网络设备标识,就像你家的地址一样,只是它用数字表示,或者说像门号一样。假如把酒店看成网络，那么每间房门号就是一个IP地址啦。看看它的英文:Internet Protocol,也就是网络协议的意思</p><p>说到IP,还要说到域名。因为IP纯数字,不好记忆,那么就用域名与之对应,这个呢DNS服务器来解决,域名与IP地址是映射关系。比如说,我们可以通过百度的IP地址来找到百度的网页：202.108.22.5 ,也可以通过<a target="_blank" rel="noopener" href="http://www.baidu.com/">www.baidu.com</a> 来找到同样的页面,这里百度公司就是通过DNS服务器把域名<a target="_blank" rel="noopener" href="http://www.baidu.com/">www.baidu.com</a> 解析到202.108.22.5,所以他们存在映射关系,这样的话,是不是网民记<a target="_blank" rel="noopener" href="http://www.baidu.com/">www.baidu.com</a> 比记202.108.22.5这个好多啦！</p><p>还有就是特殊的IP地址：本地的IP地址,或者说是本地的回环地址：127.0.0.1，主机名是：localHost</p><p>你也可以打开这个DOC命令行,输入ipconfig查看网络配置。</p><p>知道了IP地址,那在JAVA中如何获取IP地址呢？其实很简单,在JAVA中IP地址对应的是：InetAddress类,在java.net包中放着,需要用的话,就不用客气地把它导入。</p><p>InetAddress这个类没有构造方法,所以不能实例化,但可以通过它本身的方法获取到对象,还记得单例设计模式也是这样吗？</p><p>其主要的方法：</p><p><img src="/liaojie.github.io/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/liaojie1314/PicGo/images/InetAddress.png"></p><p>由上面的表子可以看出,要获取到IP地址:首先要得到这个InetAddress,然后通过这个InetAddress对象的getHostAddress方法就可以获取到这个IP地址。</p><blockquote><p>get：获得, Host：主机,Address：地址,也就是获取主机地址的意思</p></blockquote><p>那么,如何获取这个InetAddress对象呢？从上面的表子也可以看出有好几个静态的方法呢！这里的前提是我们不知道这个IP地址要获取的是IP地址,所以我们用这个方法来获取InetAddress对象,然后通过getHostAddress()方法来获取IP地址！</p><p>代码：</p><pre class="line-numbers language-Java" data-language="Java"><code class="language-Java">//导包
import java.net.*;

public class Demo{
	public static void main(String[] args)throws Exception{
		
		//获取InetAddress对象
		InetAddress ia = InetAddress.getByName("www.sunofbeach.net");
		//然后调用InetAddress对象中的getHostAddress()方法获得IP
		String ip = ia.getHostAddress();
		//输出到控制台上看看结果吧：
		System.out.println("www.sunofbeach.net的IP地址是："+ip);
	}
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>获取本地的IP地址</p><pre class="line-numbers language-Java" data-language="Java"><code class="language-Java">//导包
import java.net.*;

public class Demo{
	public static void main(String[] args)throws Exception{
		
		//获取InetAddress对象
		InetAddress ia = InetAddress.getLocalHost();
		
		//获取IP地址
		String ip = ia.getHostAddress();
		//在实际开发中，一般简写为：
                //InetAddress ia = InetAddress.getLocalHost().getHostAddress();
		
		System.out.println("本机IP地址为："+ip);
	}
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>OK,搞定完IP之后就到这个端口</p><p>我们通过IP找到了主机对吧！但是这个主机上有很多的软件吧,他们都在运行,当我们发送一个数据到主机上,那这个数据到底是给哪个软件的呢,这样就出现问题了！解决这个问题当然是用端口啦,这个端口并不是物理端口,所谓的物理端口就是计算机硬件上的插口,这里的端口是逻辑端口,关于端口的几点说明如下：</p><p>1.端口的范围从0<del>65535（2的16次方减1）<br>2.系统保留端口为：0</del>1024<br>3.一些常用的端口,FTP：21,SMTP：25,HTTP：80</p><p>最后一个是:协议</p><p>顾名思义,协议就是一起商量好共同来往的相关规定,或者说是传输规则。传输协议、UDP和TCP协议。</p><p>重点:UDP和TCP传输协议的区别</p><p><img src="/liaojie.github.io/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/liaojie1314/PicGo/images/UDP.png"></p><p><img src="/liaojie.github.io/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/liaojie1314/PicGo/images/TCP.png"></p><p>解释一下上面的三次握手:</p><p>Client说：服务端哥，我想联你，在吗？—————&gt;请求链接</p><p>Server说：客户端弟，我在的，你联过来吧！———-&gt;服务端确认链接</p><p>Client说：那好，我真的联上来啦！——————–&gt;客户端确认链接</p><p>计算机与计算机之间的通信步骤:</p><p>1、通过IP地址找到主机;2、通过端口找到接收的程序;3、通过协议发送数据。</p><h3 id="传输协议-UDP"><a href="#传输协议-UDP" class="headerlink" title="传输协议:UDP"></a>传输协议:UDP</h3><p>UDP:不面向链接、不可靠、速度快,一般用于聊天、视频、通话之类的一次性数据传输,不需要精确数据或者永久数据的情况下使用。</p><p>在说这两个传输协议之前,要提到的是Socket,Socket大概是插座的意思,那么这里呢可以理解为网线插口,也就是一个端点。</p><p>现在有两台主机之间要传输数据,所以呢,首先要有码头,那我们看看如何创建码头。</p><p>UDP的码头是DatagramSocket,它可以接受和发送数据”包”。一般发送的话要指定IP地址,还有端口,而接受端可以不指定IP,但要监视端口。下面是DatagramSocket的常用构造方法：</p><blockquote><p>DatagramSocket() 构造数据报套接字并将其绑定到本地主机上任何可用的端口。 DatagramSocket(int port) 创建数据报套接字并将其绑定到本地主机上的指定端口。 DatagramSocket(int port, InetAddress laddr) 创建数据报套接字，将其绑定到指定的本地地址。</p></blockquote><p>第一个一般用于接收端,第二个用于发送端。</p><p>常用方法：<br><img src="/liaojie.github.io/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/liaojie1314/PicGo/images/functions.png"></p><p>主要用到的还是接收和发送,另外就是获取IP地址,我们还需要一个类DatagramPacket.这个类是用于把数据打包的。常用的构造方法列一下：<br><img src="/liaojie.github.io/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/liaojie1314/PicGo/images/DatagramPacket.png"></p><p>有了码头,有了数据包,接下来就是形象生动地说说步骤：</p><p>发送端的操作：</p><p>1.建立Socket服务,随便你指不指定端口,不指定系统分配。另外就是端口顺延,如果这次端口是1555,下次就是1556,因为当你运行完程序后,不能保证端口也释放了,为了防止出错,所以就这样顺延下去咯！</p><p>2.将要发送的数据封装到包中,准备发送.</p><p>3.发送数据,通过send方法发送出去.</p><p>4.最后,不要忘记关闭资源！</p><p><img src="/liaojie.github.io/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/liaojie1314/PicGo/images/%E5%8F%91%E9%80%81%E7%AB%AF.png"></p><p>发送端代码:</p><pre class="line-numbers language-Java" data-language="Java"><code class="language-Java">//发送端

//导包
import java.net.*;

public class Demo{
	public static void main(String[] args)throws Exception{
		
		//创建Socket服务
		DatagramSocket ds = new DatagramSocket();
                //不指定端口也行，稍后在数据里指定。
		
		//把数据打包
		String data = "example：example.com";
		byte[] buf = data.getBytes();
                //把数据转换成字节数组
		DatagramPacket dp = new DatagramPacket(buf,
                                  buf.length,
                                  InetAddress.getByName("PresidentsPC"),
                                  10000);//通过名字获取IP，并指定端口
		
		//发送数据
		ds.send(dp);
		//关闭资源
		ds.close();
	}
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>接受端的步骤</p><p>1.建立服务</p><p>2.定义一个缓冲区来接受数据</p><p>3.调用DatagramPacket中的各种方法来达到我们的需求</p><p>4.关闭资源</p><p>接收端的代码:</p><pre class="line-numbers language-Java" data-language="Java"><code class="language-Java">//接收端

//导包
import java.net.*;

public class Server{
	public static void main(String[] args)throws Exception{
		
		//建立服务监视这个端口
		DatagramSocket ds = new DatagramSocket(10000);
		
		//定义一个缓冲区用于接收数据
		byte[] buf = new byte[1024];//可以乘以64，因为一个包在64K以内。
		DatagramPacket dp = new DatagramPacket(buf,buf.length);
		ds.receive(dp);
		
		//获取IP，这是一个习惯，因为要知道这数据是从那里来的
		String ip = dp.getAddress().getHostAddress();
		System.out.println("来自"+ip+"的数据是");
		
		//把数据弄出来吧
		System.out.println(new String(buf,0,dp.getLength()));
		
		//关闭资源
		ds.close();		
	}
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>eg:先是发送键盘录入的程序,下面分析一下：</p><p>1.首先,要建立服务</p><p>2.获取资源,从控制台中获取,这个可以用高效的方法BufferedReader,读一行。</p><p>3.把资源打成包发送出去</p><p>4.关闭资源。</p><p>PS:这次我们进行异常处理</p><p>第一个是发送端(客户端)：</p><pre class="line-numbers language-Java" data-language="Java"><code class="language-Java">//客户端，用来发送从键盘录入的资源

//导包
import java.net.*;
import java.io.*;

public class Demo{
	public static void main(String[] args){
		
		//建立服务
		DatagramSocket ds = null;
		
		//获取输入字符
		BufferedReader br = null;
		try{
		if(ds==null)
			ds =  new DatagramSocket();
		if(br==null)
			br = new BufferedReader(new InputStreamReader(System.in));//获取键盘录入信息
			
			//把读取的资源打包
			byte[] buf = br.readLine().getBytes();//合在一起写啦。
			
			DatagramPacket dp = 
                        new DatagramPacket(buf,buf.length,
                        InetAddress.getByName("PresidentsPC"),
                        10004);// 打包数据并指定IP和端口
			
			//发送出去
			ds.send(dp);
		}catch(Exception e){
			System.out.println("数据发送失败");
		}finally{
			//关闭资源
			
			ds.close();
			if(br!=null)
			try{
				br.close();
			}catch(Exception e){
				System.out.println("流关不了，坏了！");
			}
		}
	}
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>接下来是接收端(服务端):</p><pre class="line-numbers language-Java" data-language="Java"><code class="language-Java">//接收端

//导包
import java.net.*;

public class Server{
	public static void main(String[] args){
		
		//创建服务
		DatagramSocket ds = null;
		DatagramPacket dp = null;
		try{
			if(ds==null)
				ds = new DatagramSocket(10004);
			//创建缓冲区
			byte[] buf  = new byte[1024];
			
			//接收数据
			if(dp==null)
				dp = new DatagramPacket(buf,buf.length);
			ds.receive(dp);
			
			String ip  = dp.getAddress().getHostName();
			
			//输出数据到控制台上
			System.out.println(ip+" :"+new String(buf,
                                     0,
                                     dp.getLength()));
			//关闭资源
		
		}catch(Exception e){
			System.out.println("哎呀，妈呀，出问题了！");
		}finally{
			ds.close();
		}		
	}
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>接下来,我们要写一个多线程的,不断地接收数据</p><pre class="line-numbers language-Java" data-language="Java"><code class="language-Java">// 导包
import java.io.*;
import java.net.*;

public class ChatDemo {

	public static void main(String[] args) {
		
		//创建读取线程
		new Thread(new ChatThread()).start();

		// 创建服务
		DatagramSocket ds = null;
		BufferedReader br = null;
		try {
			if (ds == null)
				ds = new DatagramSocket();
			// 读取键盘录入
			if (br == null)
				br = 
                       new BufferedReader(new InputStreamReader(System.in));
			// 读取数据
			String line = null;
			while ((line = br.readLine()) != null) {
				// 发送数据
				byte[] buf = line.getBytes();
				DatagramPacket dp = new DatagramPacket(buf, buf.length, InetAddress.getByName("PresidentsPC"), 10000);
				ds.send(dp);
			}
		} catch (Exception e) {
			System.out.println(e.toString());
		} finally {

			ds.close();
			if (br != null)
				try {
					br.close();
				} catch (Exception e) {
					System.out.println(e.toString());
				}
		}
	}
}

//搞一个线程来接受数据
class ChatThread implements Runnable {
	
	public void run(){
		
		while(true){
			DatagramSocket ds = null;
			try {
	                      ds = new DatagramSocket(10000);//监视10000端口
	                        //获取数据
	                        byte[] buf = new byte[1024];
	                        
	                        DatagramPacket dp = new DatagramPacket(buf,buf.length);
	                        ds.receive(dp);                       
	                        
	                        //获取IP
	                        String ip = dp.getAddress().getHostAddress();
	                        
	                        //输出数据
	                        System.out.println(ip+" :"+new String(buf,0,dp.getLength()));
	                   
	                        
                        } catch (Exception e) {
                        	System.out.println(e.toString());
                        }finally{
                        	ds.close();
                        }
		}
	}
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="传输协议：TCP"><a href="#传输协议：TCP" class="headerlink" title="传输协议：TCP"></a>传输协议：TCP</h3><p>TCP第一步也是创建服务,但是这服务稍微有点不同:客户端的服务是Sokcet,服务端的服务是ServerSocket。无论是UDP,还是TCP,只要多写几次就熟悉了。</p><p>先看看Socket的常用的构造方法和普通方法</p><p><img src="/liaojie.github.io/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/liaojie1314/PicGo/images/Socket.png"></p><p>客户端的步骤:</p><p>1.建立服务Socket</p><p>2.获取输出流,把数据变成字节数组,通过输出流发送给服务端。</p><p>3.关闭输出流,获取输入流,获取反馈信息</p><p>4.关闭资源</p><p>代码体现:</p><pre class="line-numbers language-Java" data-language="Java"><code class="language-Java">//导包
import java.io.*;
import java.net.*;

public class Client {

	public static void main(String[] args) {

		// 创建服务
		Socket s = null;
		try {
			if (s == null)
				s = new Socket("PresidentsPC", 13000);
			//把数据转换成字节数组
			byte[] buf = "example".getBytes();
			
			//获取输出流
			OutputStream out = s.getOutputStream();
			//发送数据
			out.write(buf);
			
			//关闭发送流
			s.shutdownOutput();
			
			//获取输入流，获取反馈信息
			InputStream in = s.getInputStream();
			byte[] buffer  = new byte[1024];
			int len = in.read(buffer);
			
			//打印反馈信息
			System.out.println(new String(buffer,0,len));
		} catch (Exception e) {
			System.out.println(e.toString());
		}finally{
			if(s!=null){
				try{
					s.close();
				}catch(Exception e)
				{
					System.out.println(e.toString());}
				}
		
		}

	}
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>服务端又如何呢,其实还是大同小异的,要是IO知识掌握了,一点问题都没有.</p><p>步骤如下:</p><p>1.建立服务ServerSocket服务,然后用ServerSocket的accept()方法得到Socket服务</p><p>2.获取输入流,然后可以得到数据</p><p>3.对读到的数据进行处理,该干嘛干嘛去</p><p>4.反馈信息给客户端</p><p>5.各种关闭资源</p><p>代码:</p><pre class="line-numbers language-Java" data-language="Java"><code class="language-Java">//导包
import java.io.*;
import java.net.*;

public class Server {

	public static void main(String[] args)throws Exception {

		//创建服务
		ServerSocket ss = new ServerSocket(13000);
		
		Socket s = ss.accept();
		//先搞到IP地址
		String ip = s.getInetAddress().getHostAddress();
		
		//输出链接上来的机器
		System.out.println(ip+"-----connected");
		
		//获取输入流
		InputStream in  = s.getInputStream();
		//读取数据
		byte[] buf = new byte[1024];
		
		int len = 0;
		while((len = in.read(buf))!=-1){
			//打印到控制台上吧
			System.out.println(new String(buf,0,len));
		}
		s.shutdownInput();
		
		//发送反馈信息
		OutputStream out = s.getOutputStream();
		out.write("服务端收到啦".getBytes());
		
		//关闭资源
		s.close();
		ss.close();
	}
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这个例子也搞定了,接下来就可以更深入发学习TCP其他场景的应用了。比如说,上传图片并发上传图片,还要追求高效,这可以采用缓冲技术。</p><h3 id="网络传输应用"><a href="#网络传输应用" class="headerlink" title="网络传输应用"></a>网络传输应用</h3><pre class="line-numbers language-Java" data-language="Java"><code class="language-Java">import java.io.*;
import java.net.*;

class ServerForAll {

	public static void main(String[] args) throws Exception {

		// 创建服务
		ServerSocket ss = new ServerSocket(19000);
		// 创建线程
		while (true) {
			Socket s = ss.accept();
			new Thread(new ServerThread(s)).start();
		}

	}

}

class ServerThread implements Runnable {
	// 持有s的引用
	private Socket s;

	public ServerThread(Socket s) {
		this.s = s;
	}

	public void run() {

		// 获取流
		InputStream in = null;
		OutputStream out = null;
		// 把上传的文件直接入到目录下
		OutputStream outPutFile = null;
		String ip = s.getInetAddress().getHostAddress();
		System.out.println(ip+"---connected");
		
		int count = 0;
		try {
			in = s.getInputStream();
			out = s.getOutputStream();
			File file = new File("Data.jpg");
			if (file.exists())
				file = new File("Data" + "(" + (count++) + ")");
			outPutFile = new FileOutputStream(file);

			// 读取文件
			byte[] buf = new byte[1024];
			int len = 0;
			while ((len = in.read(buf)) != -1) {
				// 写数据
				outPutFile.write(buf, 0, len);
			}
			// 反馈信息
			out.write("上传成功！".getBytes());

			s.close();
			outPutFile.close();
		} catch (Exception e) {
			System.out.println(e.toString());
		}

	}
}

class Client {

	public static void main(String[] args) {
		// 把路径直接用参数传入
		if (args.length == 0) {
			System.out.println("请传入jpg图片的路径参数");
			return;
		}
		if (!args[0].endsWith(".jpg")) {
			System.out.println("图片格式不正确");
			return;
		}

		File file = new File(args[0]);
		if (!file.exists()) {
			System.out.println("文件不存在");
			return;
		}
		// 创建服务
		Socket s = null;
		InputStream in = null;
		try {
			s = new Socket("PresidentsPC", 19000);
			in = new FileInputStream(file);
			// 获取输出流
			OutputStream out = s.getOutputStream();
			byte[] buf = new byte[1024];
			int len = 0;
			while ((len = in.read(buf)) != -1) {
				// 发送数据
				out.write(buf, 0, len);
			}
			// 关闭发送流
			s.shutdownOutput();

			// 获取输入流，获取反馈信息
			InputStream input = s.getInputStream();
			byte[] buffer = new byte[1024];
			int length = input.read(buffer);

			// 打印反馈信息
			System.out.println(new String(buffer, 0, length));
		} catch (Exception e) {
			System.out.println(e.toString());
		} finally {
			if (s != null) {
				try {
					s.close();
				} catch (Exception e) {
					System.out.println(e.toString());
				}
				if (in != null)
					try {
						in.close();
					} catch (Exception e) {
						System.out.println(e.toString());
					}
			}

		}

	}
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><h2 id="http协议"><a href="#http协议" class="headerlink" title="http协议"></a>http协议</h2><h3 id="什么是http协议？"><a href="#什么是http协议？" class="headerlink" title="什么是http协议？"></a>什么是http协议？</h3><p>http是什么意思？HyperText Transfer Protocol 翻译过来就是超文本传输协议<br>协议就是约定的意思,内容是Http相关的格式</p><p>http协议是基于TCP/IP协议之上的应用层协议<br>http工作流程</p><p><img src="/liaojie.github.io/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/liaojie1314/PicGo/images/response.png"></p><p>客户端发起一个请求,然后服务器处理请求,做出响应。</p><p>这个流程是一定的,换句话说,请求一定是客户端请求,响应一定是服务端响应。不可以是服务端向客户端发起请求,也不可以是客户端做出响应。</p><p>这种情况是有的,但是当发起请求那一刻,你就要把它看成客户端了。</p><p>这是充要条件</p><p>客户端=&gt;发起请求，发起请求=&gt;客户端</p><p>响应结果=&gt;服务端。服务端=&gt;响应结果</p><h3 id="http不保存状态"><a href="#http不保存状态" class="headerlink" title="http不保存状态"></a>http不保存状态</h3><p>当一个请求,一个响应完成时,那么一个http的请求就完成了。当然也有特殊情况,就是无网了,你发不起请求。然后服务器处理超时了,你也得不到结果。</p><p>http是无状态协议,什么意思呢？也就是不保存状态。一次请求完成后,下一次再发起请求,又是新的。该设置什么内容设置什么内容,要给什么参数给什么参数。</p><p>http无状态,那怎么知道这个请求用户已经登录了呢？登录状态保存在哪里呢？所以就引入了cookies这个东西了。在cookies里可以保存一个令牌,每次请求的时候,把这个令牌作为参数给服务器校验,这样子就可以知道这个用户的登录状态啦。<br>http的8种请求方式</p><ul><li>get</li><li>post</li><li>put</li><li>delete</li><li>head</li><li>trace</li><li>options</li><li>connect</li></ul><p>作为Android开发人员知道前面四个就够了。</p><p>通常情况下：</p><blockquote><p>get：用于请求数据 post：用于提交数据 put：用于更新数据 delete：用于删除数据</p></blockquote><p>同一个接口,不同的请求方式作用就不一样了</p><p>请求文章的CRUD接口</p><ul><li>请求：/article/{articleId} 请求方式：get请求</li><li>删除：/article/{articleId} 请求方式：deleted请求</li><li>更新：/article/{articleId} 请求方式：put请求</li><li>提交(发表文章)：/article/ 请求方式：post请求</li></ul><h3 id="http响应码"><a href="#http响应码" class="headerlink" title="http响应码"></a>http响应码</h3><p>响应码:说明是服务器给客户端结果码</p><p>相信大家在浏览某些网站时应该见过404吧,那么404是什么意思呢？<br><img src="/liaojie.github.io/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/liaojie1314/PicGo/images/%E5%93%8D%E5%BA%94%E7%A0%81.png"></p><p>404也就是4xx,4开头的表示服务器无法请求<br>而5开头的,比如说500,服务器崩溃了指的是服务器的问题</p><h3 id="http请求格式"><a href="#http请求格式" class="headerlink" title="http请求格式"></a>http请求格式</h3><p>当我们使用http向服务器发起一个请求时,它的格式是怎么样子的呢？</p><p>首先这个请求是包含了：</p><ul><li>请求行</li><li>请求头</li><li>空行</li><li>请求体<br><img src="/liaojie.github.io/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/liaojie1314/PicGo/images/%E8%AF%B7%E6%B1%82%E6%A0%BC%E5%BC%8F.png"></li></ul><p>比如说我们用fiddler抓个get请求看看</p><p>get请求:<br><img src="/liaojie.github.io/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/liaojie1314/PicGo/images/get.png"></p><p>post或者put请求:<br><img src="/liaojie.github.io/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/liaojie1314/PicGo/images/post.png"></p><p>请求行</p><p><img src="/liaojie.github.io/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/liaojie1314/PicGo/images/%E8%AF%B7%E6%B1%82%E8%A1%8C.png"><br>请求头</p><p><img src="/liaojie.github.io/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/liaojie1314/PicGo/images/%E8%AF%B7%E6%B1%82%E5%A4%B4.png"></p><ul><li>Host 要访问的主机</li><li>Connection 连接保持，http1.1有，1.0没有这个。keep-alive可以提高效率，在一定时间里不断开tcp连接，进行下一个请求</li><li>Content-Length 内容长度，指的是后面请求正文的数据长度</li><li>Accept 响应内容格式，也就是返回内容格式</li><li>Origin 这个是源（不是标准http里的内容，因为我访问用的是chrome，是chrome加的）</li><li>User-Agent 用户客户端相关的信息，比如说浏览器呀，操作系统信息之类的</li><li>Content-Type 提交的内容类型，我提及的是json,编码是utf-8</li><li>Referer 来源，访问入口，比如说你在搜索引擎百度里搜索，进入到网站，那么这个来源就是百度了</li><li>Accept-Encoding 响应内容的编码格式</li><li>Accept-Language 响应内容的语言</li><li>Cookie cookies</li></ul><p>请求体</p><blockquote><p>{“state”:”0”,”msg”:”审核通过.”}</p></blockquote><p>请求正文内容</p><h3 id="http响应格式"><a href="#http响应格式" class="headerlink" title="http响应格式"></a>http响应格式</h3><ul><li>响应行</li><li>响应头</li><li>空行</li><li>响应体</li></ul><hr><h2 id="使用Java的API发起网络请求"><a href="#使用Java的API发起网络请求" class="headerlink" title="使用Java的API发起网络请求"></a>使用Java的API发起网络请求</h2><p>前面我们了解了Http协议,Android应用是用java编写的,到framework层还是用java编写的,而Android的网络请求,其实是对java的网络请求进行了封装。</p><p>在android6.0以前,有apache的HttpClient,使用简单</p><p>但是<br><img src="/liaojie.github.io/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/liaojie1314/PicGo/images/HTTP.png"></p><p>所以,如果同学们以后打开别人的项目时报错,就是没有httpclient的时候就需要加上这个了。</p><pre class="line-numbers language-none"><code class="language-none">android {
    useLibrary 'org.apache.http.legacy'
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>推荐使用HttpURLConnection<br><a target="_blank" rel="noopener" href="https://developer.android.google.cn/reference/java/net/HttpURLConnection?hl=en">官方文档</a></p><p>我们先看看java是如何进行网络请求的</p><p>代码:</p><pre class="line-numbers language-Java" data-language="Java"><code class="language-Java">private static void loadData(String baseUrl, Map&lt;String, String&gt; params) {
       try {
           //拼接URL
           StringBuilder sb = new StringBuilder(baseUrl);
           if (params.size() &gt; 0) {
               sb.append("?");
               Set&lt;Map.Entry&lt;String, String&gt;&gt; entries = params.entrySet();
               for (Map.Entry&lt;String, String&gt; entry : entries) {
                   sb.append(entry.getKey());
                   sb.append("=");
                   sb.append(entry.getValue());
               }
           }
           String resultUrl = sb.toString();
           URL url = new URL(resultUrl);
           //打开连接
           HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();
           urlConnection.setRequestMethod("GET");
           //设置请求超时时间
           urlConnection.setConnectTimeout(1000);
           urlConnection.setRequestProperty("accept", "*/*");
           urlConnection.setRequestProperty("connection", "keep-alive");
           urlConnection.setRequestProperty("Accept-Language", "zh-CN,zh");

           //开始连接
           urlConnection.connect();
           //获取返回内容
           Map&lt;String, List&lt;String&gt;&gt; headerFields = urlConnection.getHeaderFields();
           Set&lt;Map.Entry&lt;String, List&lt;String&gt;&gt;&gt; entries = headerFields.entrySet();
           for (Map.Entry&lt;String, List&lt;String&gt;&gt; entry : entries) {
               System.out.println(entry.getKey() + " === " + entry.getValue());
           }
           InputStream inputStream = urlConnection.getInputStream();
           BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(inputStream, "UTF-8"));
           String line;
           while ((line = bufferedReader.readLine()) != null) {
               System.out.println(line);
           }
           bufferedReader.close();
       } catch (Exception e) {
           e.printStackTrace();
       }
   }<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>调用:</p><pre class="line-numbers language-Java" data-language="Java"><code class="language-Java">public static void main(String[] args) {
    Map&lt;String, String&gt; params = new HashMap&lt;&gt;();
    loadData("https://www.sunofbeach.net", params);
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>这样我们就把网页的内容获取到了<br>获取一个json数据:</p><pre class="line-numbers language-Java" data-language="Java"><code class="language-Java">public static void main(String[] args) {
    Map&lt;String, String&gt; params = new HashMap&lt;&gt;();
    //loadData("https://www.sunofbeach.net", params);

    //获取动态列表
    // https://www.sunofbeach.net/content/content/moment/list/1153952789488054272/1
    loadData("https://www.sunofbeach.net/content/content/moment/list/1153952789488054272/1", params);
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>将获取到的结果复制出来格式化一下,这样数据就回来了</p><p>我们先搞定请求先,然后转到Android上,把数据请求回来,显示在UI上。</p><h3 id="Android上使用java的API请求数据"><a href="#Android上使用java的API请求数据" class="headerlink" title="Android上使用java的API请求数据"></a>Android上使用java的API请求数据</h3><p>网络配置</p><pre class="line-numbers language-XML" data-language="XML"><code class="language-XML">&lt;uses-permission android:name="android.permission.INTERNET" /&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>请求的代码</p><pre class="line-numbers language-Java" data-language="Java"><code class="language-Java">import android.os.Bundle;
import android.support.v7.app.AppCompatActivity;
import android.util.Log;
import android.view.View;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.URL;

public class MainActivity extends AppCompatActivity {

    private static final String TAG = "MainActivity";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }


    public void startRequest(View view) {
        new Thread(new Runnable() {
            @Override
            public void run() {
                loadData();
            }
        }).start();
    }

    private void loadData() {
        try {
            URL url = new URL("https://www.sunofbeach.net/content/content/moment/list/1153952789488054272/1");
            HttpURLConnection httpURLConnection = (HttpURLConnection) url.openConnection();
            int responseCode = httpURLConnection.getResponseCode();
            if(responseCode == 200) {
                httpURLConnection.setConnectTimeout(1000);
                InputStream inputStream = httpURLConnection.getInputStream();
                BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(inputStream,"UTF-8"));
                String line;
                while((line = bufferedReader.readLine()) != null) {
                    Log.d(TAG,line);
                }
                bufferedReader.close();
            }
        } catch(Exception e) {
            e.printStackTrace();
        }
    }

}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>将请求回来的数据用Gson将结果格式化,用列表显示不在UI上。</p><p>MainActivity:</p><pre class="line-numbers language-Java" data-language="Java"><code class="language-Java">import android.annotation.SuppressLint;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.util.Log;
import android.view.View;
import com.google.gson.Gson;
import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.URL;
import java.util.List;
import androidx.appcompat.app.AppCompatActivity;
import androidx.recyclerview.widget.LinearLayoutManager;
import androidx.recyclerview.widget.RecyclerView;

public class MainActivity extends AppCompatActivity {

    private static final String TAG = "MainActivity";
    public static final int WHAT_LOADER_RESULT = 1;
    private static Handler mHandler;
    private RecyclerView mResultList;
    private ResultAdapter mResultAdapter;

    @SuppressLint("HandlerLeak")
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        mHandler = new Handler() {
            @Override
            public void handleMessage(Message msg) {
                switch(msg.what) {
                    case WHAT_LOADER_RESULT:
                        MomentItem result = (MomentItem) msg.obj;
                        refreshResultList(result);
                        break;
                }
            }
        };
        initView();
    }

    private void initView() {
        mResultList = findViewById(R.id.result_list);
        mResultList.setLayoutManager(new LinearLayoutManager(this));
        mResultAdapter = new ResultAdapter();
        mResultList.setAdapter(mResultAdapter);
    }

    private void refreshResultList(MomentItem result) {
        Log.d(TAG,"refreshResultList -- ");
        mResultAdapter.setData(result);
    }


    public void startRequest(View view) {
        new Thread(new Runnable() {
            @Override
            public void run() {
                loadData();
            }
        }).start();
    }

    private void loadData() {
        try {
            URL url = new URL("https://网站");
            HttpURLConnection httpURLConnection = (HttpURLConnection) url.openConnection();
            httpURLConnection.setRequestMethod("GET");
            httpURLConnection.setConnectTimeout(1000);
            int responseCode = httpURLConnection.getResponseCode();
            if(responseCode == 200) {
                InputStream inputStream = httpURLConnection.getInputStream();
                BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(inputStream,"UTF-8"));
                String line = bufferedReader.readLine();
                Log.d(TAG,"line -- &gt; " + line);
                bufferedReader.close();
                Message message = mHandler.obtainMessage();
                message.what = WHAT_LOADER_RESULT;
                Gson gson = new Gson();
                message.obj = gson.fromJson(line,MomentItem.class);
                mHandler.sendMessage(message);
            }
        } catch(Exception e) {
            e.printStackTrace();
        }
    }

}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>bean类:通过GsonFormat自动生成</p><pre class="line-numbers language-Java" data-language="Java"><code class="language-Java">import java.util.List;

public class MomentItem {


    private boolean success;
    private int code;
    private String message;
    private DataBean data;

    public boolean isSuccess() {
        return success;
    }

    public void setSuccess(boolean success) {
        this.success = success;
    }

    public int getCode() {
        return code;
    }

    public void setCode(int code) {
        this.code = code;
    }

    public String getMessage() {
        return message;
    }

    public void setMessage(String message) {
        this.message = message;
    }

    public DataBean getData() {
        return data;
    }

    public void setData(DataBean data) {
        this.data = data;
    }

    public static class DataBean {

        private PageableBean pageable;
        private int totalPages;
        private int totalElements;
        private boolean last;
        private boolean first;
        private SortBeanX sort;
        private int numberOfElements;
        private int size;
        private int number;
        private List&lt;ContentBean&gt; content;

        public PageableBean getPageable() {
            return pageable;
        }

        public void setPageable(PageableBean pageable) {
            this.pageable = pageable;
        }

        public int getTotalPages() {
            return totalPages;
        }

        public void setTotalPages(int totalPages) {
            this.totalPages = totalPages;
        }

        public int getTotalElements() {
            return totalElements;
        }

        public void setTotalElements(int totalElements) {
            this.totalElements = totalElements;
        }

        public boolean isLast() {
            return last;
        }

        public void setLast(boolean last) {
            this.last = last;
        }

        public boolean isFirst() {
            return first;
        }

        public void setFirst(boolean first) {
            this.first = first;
        }

        public SortBeanX getSort() {
            return sort;
        }

        public void setSort(SortBeanX sort) {
            this.sort = sort;
        }

        public int getNumberOfElements() {
            return numberOfElements;
        }

        public void setNumberOfElements(int numberOfElements) {
            this.numberOfElements = numberOfElements;
        }

        public int getSize() {
            return size;
        }

        public void setSize(int size) {
            this.size = size;
        }

        public int getNumber() {
            return number;
        }

        public void setNumber(int number) {
            this.number = number;
        }

        public List&lt;ContentBean&gt; getContent() {
            return content;
        }

        public void setContent(List&lt;ContentBean&gt; content) {
            this.content = content;
        }

        public static class PageableBean {
            /**
             * sort : {"unsorted":false,"sorted":true}
             * pageSize : 15
             * pageNumber : 0
             * offset : 0
             * unpaged : false
             * paged : true
             */

            private SortBean sort;
            private int pageSize;
            private int pageNumber;
            private int offset;
            private boolean unpaged;
            private boolean paged;

            public SortBean getSort() {
                return sort;
            }

            public void setSort(SortBean sort) {
                this.sort = sort;
            }

            public int getPageSize() {
                return pageSize;
            }

            public void setPageSize(int pageSize) {
                this.pageSize = pageSize;
            }

            public int getPageNumber() {
                return pageNumber;
            }

            public void setPageNumber(int pageNumber) {
                this.pageNumber = pageNumber;
            }

            public int getOffset() {
                return offset;
            }

            public void setOffset(int offset) {
                this.offset = offset;
            }

            public boolean isUnpaged() {
                return unpaged;
            }

            public void setUnpaged(boolean unpaged) {
                this.unpaged = unpaged;
            }

            public boolean isPaged() {
                return paged;
            }

            public void setPaged(boolean paged) {
                this.paged = paged;
            }

            public static class SortBean {
                /**
                 * unsorted : false
                 * sorted : true
                 */

                private boolean unsorted;
                private boolean sorted;

                public boolean isUnsorted() {
                    return unsorted;
                }

                public void setUnsorted(boolean unsorted) {
                    this.unsorted = unsorted;
                }

                public boolean isSorted() {
                    return sorted;
                }

                public void setSorted(boolean sorted) {
                    this.sorted = sorted;
                }
            }
        }

        public static class SortBeanX {
            /**
             * unsorted : false
             * sorted : true
             */

            private boolean unsorted;
            private boolean sorted;

            public boolean isUnsorted() {
                return unsorted;
            }

            public void setUnsorted(boolean unsorted) {
                this.unsorted = unsorted;
            }

            public boolean isSorted() {
                return sorted;
            }

            public void setSorted(boolean sorted) {
                this.sorted = sorted;
            }
        }

        public static class ContentBean {
            /**
             * _id : 1200696538762956800
             * content : content
             * type : 1
             * thumbUpCount : 0
             * commentCount : 0
             * url : /a/1200681268338085888
             * covers : https://imgs.example.com/group1/M00/00/0B/rBsADV3iHb2AR2ktAABV8LFIYGU029.png|https://imgs.example.com/group1/M00/00/0B/rBsADV3iKCqAYWxCAAEp3Frp3bI477.png|https://imgs.example.com/group1/M00/00/0B/rBsADV3iAymAO-J8AABCRyG8suI326.png
             * subContent : null
             * subUserName : null
             * subUserAvatar : null
             * subUserId : null
             * userName : 
             * userId : 1153952789488054272
             * userAvatar : https://imgs.example.com/group1/M00/00/07/rBsADV22ZymAV8BwAABVL9XtNSU926.png
             * publishTime : 2019-11-30T08:42:17.361+0000
             * thumbList : []
             * subTitle : Android网络访问不同版本的差异，看完这篇文章你就茅厕顿开了。
             * position : 第一个用户
             * company : example
             * hasThumbUp : false
             * images : ["https://imgs.example.com/group1/M00/00/0B/rBsADV3iHb2AR2ktAABV8LFIYGU029.png","https://imgs.example.com/group1/M00/00/0B/rBsADV3iKCqAYWxCAAEp3Frp3bI477.png","https://imgs.example.com/group1/M00/00/0B/rBsADV3iAymAO-J8AABCRyG8suI326.png"]
             */

            private String _id;
            private String content;
            private int type;
            private int thumbUpCount;
            private int commentCount;
            private String url;
            private String covers;
            private Object subContent;
            private Object subUserName;
            private Object subUserAvatar;
            private Object subUserId;
            private String userName;
            private String userId;
            private String userAvatar;
            private String publishTime;
            private String subTitle;
            private String position;
            private String company;
            private boolean hasThumbUp;
            private List&lt;?&gt; thumbList;
            private List&lt;String&gt; images;

            public String get_id() {
                return _id;
            }

            public void set_id(String _id) {
                this._id = _id;
            }

            public String getContent() {
                return content;
            }

            public void setContent(String content) {
                this.content = content;
            }

            public int getType() {
                return type;
            }

            public void setType(int type) {
                this.type = type;
            }

            public int getThumbUpCount() {
                return thumbUpCount;
            }

            public void setThumbUpCount(int thumbUpCount) {
                this.thumbUpCount = thumbUpCount;
            }

            public int getCommentCount() {
                return commentCount;
            }

            public void setCommentCount(int commentCount) {
                this.commentCount = commentCount;
            }

            public String getUrl() {
                return url;
            }

            public void setUrl(String url) {
                this.url = url;
            }

            public String getCovers() {
                return covers;
            }

            public void setCovers(String covers) {
                this.covers = covers;
            }

            public Object getSubContent() {
                return subContent;
            }

            public void setSubContent(Object subContent) {
                this.subContent = subContent;
            }

            public Object getSubUserName() {
                return subUserName;
            }

            public void setSubUserName(Object subUserName) {
                this.subUserName = subUserName;
            }

            public Object getSubUserAvatar() {
                return subUserAvatar;
            }

            public void setSubUserAvatar(Object subUserAvatar) {
                this.subUserAvatar = subUserAvatar;
            }

            public Object getSubUserId() {
                return subUserId;
            }

            public void setSubUserId(Object subUserId) {
                this.subUserId = subUserId;
            }

            public String getUserName() {
                return userName;
            }

            public void setUserName(String userName) {
                this.userName = userName;
            }

            public String getUserId() {
                return userId;
            }

            public void setUserId(String userId) {
                this.userId = userId;
            }

            public String getUserAvatar() {
                return userAvatar;
            }

            public void setUserAvatar(String userAvatar) {
                this.userAvatar = userAvatar;
            }

            public String getPublishTime() {
                return publishTime;
            }

            public void setPublishTime(String publishTime) {
                this.publishTime = publishTime;
            }

            public String getSubTitle() {
                return subTitle;
            }

            public void setSubTitle(String subTitle) {
                this.subTitle = subTitle;
            }

            public String getPosition() {
                return position;
            }

            public void setPosition(String position) {
                this.position = position;
            }

            public String getCompany() {
                return company;
            }

            public void setCompany(String company) {
                this.company = company;
            }

            public boolean isHasThumbUp() {
                return hasThumbUp;
            }

            public void setHasThumbUp(boolean hasThumbUp) {
                this.hasThumbUp = hasThumbUp;
            }

            public List&lt;?&gt; getThumbList() {
                return thumbList;
            }

            public void setThumbList(List&lt;?&gt; thumbList) {
                this.thumbList = thumbList;
            }

            public List&lt;String&gt; getImages() {
                return images;
            }

            public void setImages(List&lt;String&gt; images) {
                this.images = images;
            }
        }
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>适配器的代码:</p><pre class="line-numbers language-Java" data-language="Java"><code class="language-Java">import android.text.TextUtils;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ImageView;
import android.widget.TextView;

import com.bumptech.glide.Glide;

import java.util.ArrayList;
import java.util.List;

import androidx.annotation.NonNull;
import androidx.recyclerview.widget.RecyclerView;

public class ResultAdapter extends RecyclerView.Adapter&lt;ResultAdapter.InnerAdapter&gt; {

    private List&lt;MomentItem.DataBean.ContentBean&gt; mData = new ArrayList&lt;&gt;();

    @NonNull
    @Override
    public InnerAdapter onCreateViewHolder(@NonNull ViewGroup parent,int viewType) {
        View itemView = LayoutInflater.from(parent.getContext()).inflate(R.layout.item_moment,parent,false);
        return new InnerAdapter(itemView);
    }

    @Override
    public void onBindViewHolder(@NonNull InnerAdapter holder,int position) {
        View itemView = holder.itemView;
        TextView momentTitle = itemView.findViewById(R.id.moment_title);
        ImageView avatar = itemView.findViewById(R.id.user_avatar);
        TextView userInfo = itemView.findViewById(R.id.user_info);
        TextView userName = itemView.findViewById(R.id.user_name);
        MomentItem.DataBean.ContentBean contentBean = mData.get(position);
        String subTitle = contentBean.getSubTitle();
        if(!TextUtils.isEmpty(subTitle)) {
            momentTitle.setText(subTitle);
        } else {
            momentTitle.setText(contentBean.getContent());
        }
        userName.setText(contentBean.getUserName());
        userInfo.setText(contentBean.getPosition() + "@" + contentBean.getCompany());
	//图片我们先借助于Glide，下一篇文章我们再去了解如何加载图片
        Glide.with(itemView.getContext()).load(contentBean.getUserAvatar()).into(avatar);
    }

    @Override
    public int getItemCount() {
        return mData.size();
    }

    public void setData(MomentItem result) {
        mData.clear();
        mData.addAll(result.getData().getContent());
        notifyDataSetChanged();
    }

    public class InnerAdapter extends RecyclerView.ViewHolder {
        public InnerAdapter(@NonNull View itemView) {
            super(itemView);
        }
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>item的布局:</p><pre class="line-numbers language-XML" data-language="XML"><code class="language-XML">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;LinearLayout xmlns:android="https://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:padding="10dp"&gt;


    &lt;LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"&gt;

        &lt;ImageView
            android:id="@+id/user_avatar"
            android:layout_width="50dp"
            android:layout_height="50dp"
            android:src="@mipmap/ic_launcher" /&gt;

        &lt;LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dp"
            android:orientation="vertical"&gt;

            &lt;TextView
                android:id="@+id/user_name"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="2dp"
                android:text="用户名称"
                android:textColor="#0086FF"
                android:textSize="18sp" /&gt;

            &lt;TextView
                android:id="@+id/user_info"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="2dp"
                android:text="用户信息" /&gt;

        &lt;/LinearLayout&gt;
    &lt;/LinearLayout&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><a target="_blank" rel="noopener" href="https://docs.oracle.com/javase/8/docs/api/">Java8api文档</a></p></div><hr><div class="reprint" id="reprint-statement"><div class="reprint__author"><span class="reprint-meta" style="font-weight:700"><i class="fas fa-user">文章作者: </i></span><span class="reprint-info"><a href="/liaojie.github.io/about" rel="external nofollow noreferrer">liaojie</a></span></div><div class="reprint__type"><span class="reprint-meta" style="font-weight:700"><i class="fas fa-link">文章链接: </i></span><span class="reprint-info"><a href="https://liaojie.github.io.git/liaojie.github.io/2021/11/20/android-wang-luo-bian-cheng/">https://liaojie.github.io.git/liaojie.github.io/2021/11/20/android-wang-luo-bian-cheng/</a></span></div><div class="reprint__notice"><span class="reprint-meta" style="font-weight:700"><i class="fas fa-copyright">版权声明: </i></span><span class="reprint-info">本博客所有文章除特別声明外，均采用 <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a> 许可协议。转载请注明来源 <a href="/liaojie.github.io/about" target="_blank">liaojie</a> !</span></div></div><script async defer>document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }</script><div class="tag_share" style="display:block"><div class="post-meta__tag-list" style="display:inline-block"><div class="article-tag"><a href="/liaojie.github.io/tags/Android/"><span class="chip bg-color">Android</span></a></div></div><div class="post_share" style="zoom:80%;width:fit-content;display:inline-block;float:right;margin:-.15rem 0"><link rel="stylesheet" type="text/css" href="/liaojie.github.io/libs/share/css/share.min.css"><div id="article-share"><div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div><script src="/liaojie.github.io/libs/share/js/social-share.min.js"></script></div></div></div><style>#reward{margin:40px 0;text-align:center}#reward .reward-link{font-size:1.4rem;line-height:38px}#reward .btn-floating:hover{box-shadow:0 6px 12px rgba(0,0,0,.2),0 5px 15px rgba(0,0,0,.2)}#rewardModal{width:320px;height:350px}#rewardModal .reward-title{margin:15px auto;padding-bottom:5px}#rewardModal .modal-content{padding:10px}#rewardModal .close{position:absolute;right:15px;top:15px;color:rgba(0,0,0,.5);font-size:1.3rem;line-height:20px;cursor:pointer}#rewardModal .close:hover{color:#ef5350;transform:scale(1.3);-moz-transform:scale(1.3);-webkit-transform:scale(1.3);-o-transform:scale(1.3)}#rewardModal .reward-tabs{margin:0 auto;width:210px}.reward-tabs .tabs{height:38px;margin:10px auto;padding-left:0}.reward-content ul{padding-left:0!important}.reward-tabs .tabs .tab{height:38px;line-height:38px}.reward-tabs .tab a{color:#fff;background-color:#ccc}.reward-tabs .tab a:hover{background-color:#ccc;color:#fff}.reward-tabs .wechat-tab .active{color:#fff!important;background-color:#22ab38!important}.reward-tabs .alipay-tab .active{color:#fff!important;background-color:#019fe8!important}.reward-tabs .reward-img{width:210px;height:210px}</style><div id="reward"><a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a><div id="rewardModal" class="modal"><div class="modal-content"><a class="close modal-close"><i class="fas fa-times"></i></a><h4 class="reward-title">你的赏识是我前进的动力</h4><div class="reward-content"><div class="reward-tabs"><ul class="tabs row"><li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li><li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li></ul><div id="alipay"><img src="/liaojie.github.io/medias/loading.gif" data-original="/liaojie.github.io/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码"></div><div id="wechat"><img src="/liaojie.github.io/medias/loading.gif" data-original="/liaojie.github.io/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码"></div></div></div></div></div></div><script>$(function(){$(".tabs").tabs()})</script></div></div><link rel="stylesheet" href="/liaojie.github.io/libs/gitalk/gitalk.css"><link rel="stylesheet" href="/liaojie.github.io/css/my-gitalk.css"><div class="card gitalk-card" data-aos="fade-up"><div class="comment_headling" style="font-size:20px;font-weight:700;position:relative;padding-left:20px;top:15px;padding-bottom:5px"><i class="fas fa-comments fa-fw" aria-hidden="true"></i> <span>评论</span></div><div id="gitalk-container" class="card-content"></div></div><script src="/liaojie.github.io/libs/gitalk/gitalk.min.js"></script><script>let gitalk = new Gitalk({
        clientID: 'eedac85cd6c0645124b2',
        clientSecret: '0cbb1e584813da4a45008d2c6048fc84846ef93f',
        repo: 'liaojie1314-gitalk',
        owner: 'liaojie1314',
        admin: "liaojie1314",
        id: '2021-11-20T15-27-51',
        distractionFreeMode: false  // Facebook-like distraction free mode
    });

    gitalk.render('gitalk-container');</script><div class="livere-card card" data-aos="fade-up"><div id="lv-container" class="card-content" data-id="city" data-uid="MTAyMC81NDUzMy8zMTAwNA=="><script type="text/javascript">(function (d, s) {
                let j, e = d.getElementsByTagName(s)[0];
                if (typeof LivereTower === 'function') {
                    return;
                }

                j = d.createElement(s);
                j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
                j.async = true;

                e.parentNode.insertBefore(j, e);
            })(document, 'script');</script><noscript>为正常使用来必力评论功能请激活JavaScript。</noscript></div></div><article id="prenext-posts" class="prev-next articles"><div class="row article-row"><div class="article col s12 m6" data-aos="fade-up"><div class="article-badge left-badge text-color"><i class="fas fa-chevron-left"></i>&nbsp;上一篇</div><div class="card"><a href="/liaojie.github.io/2021/11/21/python/"><div class="card-image"><img src="/liaojie.github.io/medias/loading.gif" data-original="/liaojie.github.io/medias/featureimages/20.jpg" class="responsive-img" alt="python"> <span class="card-title">python</span></div></a><div class="card-content article-content"><div class="summary block-with-text"></div><div class="publish-info"><span class="publish-date"><i class="far fa-clock fa-fw icon-date"></i>2021-11-21 </span><span class="publish-author"><i class="fas fa-bookmark fa-fw icon-category"></i> <a href="/liaojie.github.io/categories/Python/" class="post-category">Python</a></span></div></div><div class="card-action article-tags"><a href="/liaojie.github.io/tags/Python/"><span class="chip bg-color">Python</span></a></div></div></div><div class="article col s12 m6" data-aos="fade-up"><div class="article-badge right-badge text-color">下一篇&nbsp;<i class="fas fa-chevron-right"></i></div><div class="card"><a href="/liaojie.github.io/2021/11/17/quartus/"><div class="card-image"><img src="/liaojie.github.io/medias/loading.gif" data-original="/liaojie.github.io/medias/featureimages/11.jpg" class="responsive-img" alt="Quartus"> <span class="card-title">Quartus</span></div></a><div class="card-content article-content"><div class="summary block-with-text"></div><div class="publish-info"><span class="publish-date"><i class="far fa-clock fa-fw icon-date"></i>2021-11-17 </span><span class="publish-author"><i class="fas fa-user fa-fw"></i> liaojie</span></div></div><div class="card-action article-tags"><a href="/liaojie.github.io/tags/Quartus/"><span class="chip bg-color">Quartus</span></a></div></div></div></div></article></div><script type="text/javascript" src="/liaojie.github.io/libs/codeBlock/codeBlockFuction.js"></script><script type="text/javascript" src="/liaojie.github.io/libs/codeBlock/codeLang.js"></script><script type="text/javascript" src="/liaojie.github.io/libs/codeBlock/codeCopy.js"></script><script type="text/javascript" src="/liaojie.github.io/libs/codeBlock/codeShrink.js"></script></div><div id="toc-aside" class="expanded col l3 hide-on-med-and-down"><div class="toc-widget card" style="background-color:#fff"><div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div><div id="toc-content"></div></div></div></div><div id="floating-toc-btn" class="hide-on-med-and-down"><a class="btn-floating btn-large bg-color"><i class="fas fa-list-ul"></i></a></div><script src="/liaojie.github.io/libs/tocbot/tocbot.min.js"></script><script>$(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });</script></main><footer class="page-footer bg-color"><div class="container row center-align" style="margin-bottom:15px!important"><div class="col s12 m8 l8 copy-right">Copyright&nbsp;&copy; <span id="year">2021</span> <span id="year">2021</span> <a href="/liaojie.github.io/about" target="_blank">lj</a><br>&nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span class="white-color">32.6k</span>&nbsp;字 <span id="busuanzi_container_site_pv">|&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv" class="white-color"></span>&nbsp;次 </span><span id="busuanzi_container_site_uv">|&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv" class="white-color"></span>&nbsp;人</span><br><span id="sitetime">载入运行时间...</span><script>function siteTime(){var e=36e5,t=24*e,n=new Date,o="2021",r=n.getFullYear(),a=n.getMonth()+1,i=n.getDate(),l=n.getHours(),m=n.getMinutes(),M=n.getSeconds(),g=Date.UTC(o,"10","18","0","0","0"),d=Date.UTC(r,a,i,l,m,M)-g,s=Math.floor(d/31536e6),u=Math.floor(d/t-365*s),T=Math.floor((d-(365*s+u)*t)/e),c=Math.floor((d-(365*s+u)*t-T*e)/6e4),f=Math.floor((d-(365*s+u)*t-T*e-6e4*c)/1e3);o==r?(document.getElementById("year").innerHTML=r,document.getElementById("sitetime").innerHTML="本站已安全运行 "+u+" 天 "+T+" 小时 "+c+" 分钟 "+f+" 秒"):(document.getElementById("year").innerHTML=o+" - "+r,document.getElementById("sitetime").innerHTML="本站已安全运行 "+s+" 年 "+u+" 天 "+T+" 小时 "+c+" 分钟 "+f+" 秒")}setInterval(siteTime,1e3)</script><br></div><div class="col s12 m4 l4 social-link social-statis"><a href="https://github.com/liaojie1314" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50"><i class="fab fa-github"></i> </a><a href="mailto:1517438366@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50"><i class="fas fa-envelope-open"></i> </a><a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=1517438366" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 1517438366" data-position="top" data-delay="50"><i class="fab fa-qq"></i></a></div></div></footer><div class="progress-bar"></div><div id="searchModal" class="modal"><div class="modal-content"><div class="search-header"><span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span> <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字" class="search-input"></div><div id="searchResult"></div></div></div><script type="text/javascript">$(function(){!function(t,i,s){"use strict";$.ajax({url:t,dataType:"xml",success:function(t){var e=$("entry",t).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get(),n=document.getElementById(i),r=document.getElementById(s);n.addEventListener("input",function(){var f='<ul class="search-result-list">',m=this.value.trim().toLowerCase().split(/[\s\-]+/);r.innerHTML="",this.value.trim().length<=0||(e.forEach(function(t){var n,e,r,i,s,l=!0,a=t.title.trim().toLowerCase(),c=t.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),u=0===(u=t.url).indexOf("/")?t.url:"/"+u,o=-1,h=-1;""!==a&&""!==c&&m.forEach(function(t,e){n=a.indexOf(t),o=c.indexOf(t),n<0&&o<0?l=!1:(o<0&&(o=0),0===e&&(h=o))}),l&&(f+="<li><a href='"+u+"' class='search-result-title'>"+a+"</a>",e=t.content.trim().replace(/<[^>]+>/g,""),0<=h&&(i=h+80,(r=h-20)<0&&(r=0),0===r&&(i=100),i>e.length&&(i=e.length),s=e.substr(r,i),m.forEach(function(t){var e=new RegExp(t,"gi");s=s.replace(e,'<em class="search-keyword">'+t+"</em>")}),f+='<p class="search-result">'+s+"...</p>"),f+="</li>")}),f+="</ul>",r.innerHTML=f)})}})}("/liaojie.github.io/search.xml","searchInput","searchResult")})</script><div id="backTop" class="top-scroll"><a class="btn-floating btn-large waves-effect waves-light" href="#!"><i class="fas fa-arrow-up"></i></a></div><script src="/liaojie.github.io/libs/materialize/materialize.min.js"></script><script src="/liaojie.github.io/libs/masonry/masonry.pkgd.min.js"></script><script src="/liaojie.github.io/libs/aos/aos.js"></script><script src="/liaojie.github.io/libs/scrollprogress/scrollProgress.min.js"></script><script src="/liaojie.github.io/libs/lightGallery/js/lightgallery-all.min.js"></script><script src="/liaojie.github.io/js/matery.js"></script><script type="text/javascript" color="122 103 238" opacity="0.7" zindex="-2" count="200" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script><script type="text/javascript">var st,OriginTitile=document.title;document.addEventListener("visibilitychange",function(){document.hidden?(document.title="ヽ(●-`Д´-)ノ你要玩捉迷藏嘛",clearTimeout(st)):(document.title="(Ő∀Ő3)ノ好哦！",st=setTimeout(function(){document.title=OriginTitile},3e3))})</script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script><script src="/liaojie.github.io/libs/others/clicklove.js" async></script><script async src="/liaojie.github.io/libs/others/busuanzi.pure.mini.js"></script><script src="/liaojie.github.io/libs/instantpage/instantpage.js" type="module"></script><script>window.imageLazyLoadSetting={isSPA:!1,preloadRatio:1,processImages:null}</script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})})</script><script>!function(n){n.imageLazyLoadSetting.processImages=o;var e=n.imageLazyLoadSetting.isSPA,i=n.imageLazyLoadSetting.preloadRatio||1,r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function o(){e&&(r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")));for(var t,a=0;a<r.length;a++)0<=(t=(t=r[a]).getBoundingClientRect()).bottom&&0<=t.left&&t.top<=(n.innerHeight*i||document.documentElement.clientHeight*i)&&function(){var e=r[a],t=e,n=function(){r=r.filter(function(t){return e!==t})},i=new Image,o=t.getAttribute("data-original");i.onload=function(){t.src=o,n()},t.src!==o&&(i.src=o)}()}o(),n.addEventListener("scroll",function(){var t=o,e=n;clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(e)},500)})}(this)</script></body></html>